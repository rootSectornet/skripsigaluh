
let DataObject = {
    IdWilayah : "",
    Wilayah : "",
    Deskripsi : "",
    Image : ""
}
$(document).ready(()=>{

    let wilayahTable = $('#wilayahTable').DataTable({

                    "processing": true, //Feature control the processing indicator.
                    "serverSide": true, //Feature control DataTables' server-side processing mode.
                    "order": [], //Initial no order.
                    "ordering": true,

                    // Load data for the table's content from an Ajax source
                    "ajax": {
                        "url": BASE_URL+"Wilayah/getData",
                        "type": "POST",
                      "dataType": "json",
                      "dataSrc": function (jsonData) {
                              return jsonData.data;
                          }

                    },
                    "autoWidth": true,
                    "lengthMenu": [
                        [5, 10, 15, 20, -1],
                        [5, 10, 15, 20, "All"] // change per page values here
                    ],
                    "pageLength": 10,
                    //Set column definition initialisation properties.
                    "columnDefs": [
                                          // membuat kolom 0 (No.) dan kolom 1 (ID) tidak dapat di search dan sorting
                      {"searchable": false, "orderable": false, "targets": [0,3,4]},
                    ],                     //Set column definition initialisation properties.
                    "columns": [
                        {"data": "no"},
                        {"data": "Wilayah"},
                        {"data": "Deskripsi"},
                        {"data": "Gambar"},
                        {"data": "action"}
                    ],

                    "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {

                    }
    })



    //image priview
            $(document).on('change', '.btn-file :file', function() {
                var input = $(this),
                    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
                input.trigger('fileselect', [label]);
                });

                $('.btn-file :file').on('fileselect', function(event, label) {
                    
                    var input = $(this).parents('.input-group').find(':text'),
                        log = label;
                    
                    if( input.length ) {
                        input.val(log);
                    } else {
                        if( log ) alert(log);
                    }
                
                });
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                
                reader.onload = function (e) {
                    $('#img-upload').attr('src', e.target.result);
                    $('#img-upload').attr('width','100%');
                }
                
                reader.readAsDataURL(input.files[0]);
                input.files[0] = "";
                console.log(input.files[0]);
            }
        }

        $("#imgInp").change(function(){
            readURL(this);
        }); 

    //function reset
        function ToDefault(){
            $("#img-upload").removeAttr("src");
            $("#textImg").val("")
            $("#namaWilayah").val("")
            $("#deskripsiWilayah").val("")
        }
    //function add
        $(".float").click(()=>{
            ToDefault()
            $(".modal-title").text("Tambah Wilayah")
            $('#WilayahModal').modal('show')
        })
    //function save 
        $("#Save").click(()=>{
            $("#Save").html('<i class="fa fa-spin fa-spinner"></i> Loading...')
            $("#Save").prop("disabled",true)

            let data = {
                
            }
        })
})
